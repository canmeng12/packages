import{b as H,A as X,u as E,b7 as z,E as K,f as e,t as n,i as t,ad as b,S as I,b8 as te,b9 as le,c as Y,C as re,g as W,B as F,F as y,x as ne,ba as v,h as S,bb as ae,bc as se,bd as ie,be as ce,bf as oe,bg as ue,bh as de,bi as ge,bj as B,bk as O,bl as he,bm as fe,bn as pe,b6 as ve,n as me,bo as be,bp as $e,bq as q,br as _e,bs as U,bt as xe,bu as Ce,bv as Se,bw as R,bx as M,w as L,$ as V,K as Z,o as J,p as j,v as ee,l as ye,by as N,bz as ke,bA as we}from"./index-CF0nzQpL.js";import{D as De}from"./DocumentTitle-BUUg7ZBL.js";var Fe=n("<input type=checkbox>"),Te=n("<input>"),Ie=n("<select>"),Ne=n("<label>"),Ae=n("<option>A"),Pe=n("<option>AAAA"),Ee=n("<option>CNAME"),Re=n("<option>TXT"),Me=n("<option>MX"),Le=n("<option>SRV"),Ve=n("<option>HTTPS"),Be=n("<option>NS"),Qe=n("<option>DNSKEY"),Ge=n("<option>DS"),Oe=n("<option>SIG"),qe=n("<option>SOA"),Ue=n("<option>RRSIG"),je=n("<option>RP"),He=n('<div class="flex flex-col overflow-auto p-4">'),Xe=n('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><div class="flex items-center gap-2">'),ze=n("<div class=py-2>"),Ke=n('<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>'),Ye=n('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),We=n('<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">'),T=n("<option>"),Ze=n("<fieldset class=fieldset>"),Je=n('<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">'),et=n('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col"></div><div class="flex flex-col"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><div class=h-[2.5rem]>'),tt=n('<div class="mx-auto flex max-w-screen-md flex-col gap-4">');const Q=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Fe();return M(s,L({get class(){return V("toggle",l.class)}},d),!1,!1),s})()},P=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Te();return M(s,L({get class(){return V("input min-w-0",l.class)}},d),!1,!1),s})()},D=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Ie();return M(s,L({get class(){return V("select",l.class)}},d),!1,!0),t(s,()=>Z(()=>d.children)()),s})()},w=c=>{const[l,d]=R(c,["class"]);return(()=>{var s=Ne();return M(s,L({get class(){return V("label truncate",l.class)}},d),!1,!0),t(s,()=>Z(()=>d.children)()),s})()},lt=J({name:j(),type:j()}),rt=()=>{const[c]=E(),l=le(),d="google.com",{form:s,isSubmitting:$}=Y({extend:ee({schema:lt}),onSubmit:u=>l.get("dns/query",{searchParams:{name:u.name||d,type:u.type}}).json().then(({Answer:p})=>f(p?.map(({data:a})=>a)||[])).catch(p=>ye.error(p.message))}),[g,f]=re([]);return(()=>{var u=Xe(),p=u.firstChild,a=p.firstChild;return W(s,p,()=>s),t(p,e(P,{type:"search",name:"name",class:"flex-1",placeholder:d,onInput:m=>{m.target.value||f([])}}),a),t(a,e(D,{name:"type",get children(){return[Ae(),Pe(),Ee(),Re(),Me(),Le(),Ve(),Be(),Qe(),Ge(),Oe(),qe(),Ue(),je()]}}),null),t(a,e(F,{type:"submit",class:"btn-primary",get loading(){return $()},get children(){return c("dnsQuery")}}),null),t(u,e(I,{get when(){return g().length>0},get children(){var m=He();return t(m,e(y,{get each(){return g()},children:x=>(()=>{var o=ze();return t(o,x),o})()})),m}}),null),u})()},nt=J({port:N(),"socks-port":N(),"redir-port":N(),"tproxy-port":N(),"mixed-port":N()}),at=({isSingBox:c})=>{const[l]=E(),d=[{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:a=>void v("mixed-port",Number(a.target.value),u)},{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:a=>void v("port",Number(a.target.value),u)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:a=>void v("socks-port",Number(a.target.value),u)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:a=>void v("redir-port",Number(a.target.value),u)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:a=>void v("tproxy-port",Number(a.target.value),u)}],{form:s,setInitialValues:$,reset:g}=Y({extend:ee({schema:nt})}),[f,{refetch:u}]=z(ke);ne(()=>{const a=f();a&&($(a),g())});const p=K(()=>{const a=f();return a?.["mode-list"]||a?.modes||["rule","direct","global"]});return(()=>{var a=We(),m=a.firstChild,x=m.firstChild,o=x.nextSibling,h=o.nextSibling,C=m.nextSibling;return t(x,e(w,{for:"enable-allow-lan",get children(){return l("allowLan")}}),null),t(x,e(Q,{id:"enable-allow-lan",get checked(){return f()?.["allow-lan"]},onChange:r=>void v("allow-lan",r.target.checked,u)}),null),t(o,e(w,{for:"mode",get children(){return l("runningMode")}}),null),t(o,e(D,{id:"mode",onChange:r=>void v("mode",r.target.value,u),get children(){return e(y,{get each(){return p()},children:r=>(()=>{var i=T();return i.value=r,t(i,()=>l(r)??r),S(()=>i.selected=r===f()?.mode),i})()})}}),null),t(h,e(w,{for:"interface-name",get children(){return l("outboundInterfaceName")}}),null),t(h,e(P,{id:"interface-name",get value(){return f()?.["interface-name"]},onChange:r=>void v("interface-name",r.target.value,u)}),null),t(a,e(I,{get when(){return!c()},get children(){return[(()=>{var r=Ke(),i=r.firstChild,k=i.nextSibling,G=k.nextSibling;return t(i,e(w,{for:"enable-tun-device",get children(){return l("enableTunDevice")}}),null),t(i,e(Q,{id:"enable-tun-device",get checked(){return f()?.tun?.enable},onChange:_=>void v("tun",{enable:_.target.checked},u)}),null),t(k,e(w,{for:"tun-ip-stack",get children(){return l("tunModeStack")}}),null),t(k,e(D,{id:"tun-ip-stack",onChange:_=>void v("tun",{stack:_.target.value},u),get children(){return e(y,{each:["Mixed","gVisor","System","LWIP"],children:_=>(()=>{var A=T();return A.value=_,t(A,_),S(()=>A.selected=f()?.tun?.stack===_),A})()})}}),null),t(G,e(w,{for:"device-name",get children(){return l("tunDeviceName")}}),null),t(G,e(P,{id:"device-name",get value(){return f()?.tun?.device},onChange:_=>void v("tun",{device:_.target.value},u)}),null),r})(),(()=>{var r=Ye();return W(s,r,()=>s),t(r,e(y,{each:d,children:i=>(()=>{var k=Ze();return t(k,e(w,{get for(){return i.key},get children(){return i.label()}}),null),t(k,e(P,{get id(){return i.key},get name(){return i.key},type:"number",get placeholder(){return i.label()},get onChange(){return i.onChange}}),null),k})()})),r})()]}}),C),t(C,e(F,{class:"btn-primary",get loading(){return se()},onClick:ae,get children(){return l("reloadConfig")}}),null),t(C,e(F,{class:"btn-accent",get loading(){return ce()},onClick:ie,get children(){return l("flushFakeIP")}}),null),t(C,e(F,{class:"btn-warning",get loading(){return ue()},onClick:oe,get children(){return l("restartCore")}}),null),t(C,e(I,{get when(){return!c()},get children(){return e(F,{class:"btn-secondary",get loading(){return ge()},onClick:de,get children(){return l("updateGEODatabases")}})}}),null),a})()},st=()=>{const[c]=E(),l=H(),d=[{label:()=>c("en"),value:B.EN},{label:()=>c("zh"),value:B.ZH},{label:()=>c("ru"),value:B.RU}],s=[{label:"SystemUI",value:O.SystemUI},{label:"FiraSans",value:O.FiraSans}];return(()=>{var $=et(),g=$.firstChild,f=g.firstChild,u=f.nextSibling,p=u.nextSibling,a=g.nextSibling,m=a.firstChild,x=m.firstChild;return t(f,e(b,{get children(){return c("switchFont")}}),null),t(f,e(D,{class:"w-full",onChange:o=>he(o.target.value),get children(){return e(y,{each:s,children:o=>(()=>{var h=T();return t(h,()=>o.label),S(()=>h.selected=fe()===o.value),S(()=>h.value=o.value),h})()})}}),null),t(u,e(b,{get children(){return c("switchLanguage")}}),null),t(u,e(D,{class:"w-full",onChange:o=>pe(o.target.value),get children(){return e(y,{each:d,children:o=>(()=>{var h=T();return t(h,()=>o.label()),S(()=>h.selected=ve()===o.value),S(()=>h.value=o.value),h})()})}}),null),t(p,e(b,{get children(){return X()?.url}}),null),t(p,e(F,{class:"btn-info",onClick:()=>{me(""),l(be.Setup)},get children(){return c("switchEndpoint")}}),null),t(m,e(b,{get children(){return c("autoSwitchTheme")}}),x),t(x,e(Q,{get checked(){return q()},onChange:o=>$e(o.target.checked)})),t(a,e(I,{get when(){return q()},get children(){var o=Je(),h=o.firstChild,C=h.nextSibling;return t(h,e(b,{get children(){return c("favDayTheme")}}),null),t(h,e(D,{class:"w-full",onChange:r=>_e(r.target.value),get children(){return e(y,{each:U,children:r=>(()=>{var i=T();return i.value=r,t(i,r),S(()=>i.selected=xe()===r),i})()})}}),null),t(C,e(b,{get children(){return c("favNightTheme")}}),null),t(C,e(D,{class:"w-full",onChange:r=>Ce(r.target.value),get children(){return e(y,{each:U,children:r=>(()=>{var i=T();return i.value=r,t(i,r),S(()=>i.selected=Se()===r),i})()})}}),null),o}}),null),$})()},ot=()=>{const c=H();if(!X())return c("/setup",{replace:!0}),null;const[l]=E(),d="v1.190.0",[s]=z(we,{initialValue:""}),$=K(()=>s()?.includes("sing-box")||!1);return[e(De,{get children(){return l("config")}}),(()=>{var g=tt();return t(g,e(I,{get when(){return!$()},get children(){return[e(b,{withDivider:!0,get children(){return l("dnsQuery")}}),e(rt,{})]}}),null),t(g,e(b,{withDivider:!0,get children(){return l("coreConfig")}}),null),t(g,e(at,{isSingBox:$}),null),t(g,e(b,{withDivider:!0,get children(){return l("xdConfig")}}),null),t(g,e(st,{}),null),t(g,e(b,{withDivider:!0,get children(){return l("version")}}),null),t(g,e(I,{get when(){return!s.loading},get children(){return e(te,{frontendVersion:d,backendVersion:s})}}),null),g})()]};export{ot as default};
