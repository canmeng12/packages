import{b as H,A as U,u as R,b7 as X,E as z,f as e,t as r,i as t,ad as $,S as N,b8 as ee,b9 as te,c as K,C as le,g as W,B as w,F as y,x as re,ba as b,h as T,bb as ne,bc as ae,bd as se,be as ie,bf as oe,bg as ce,bh as ue,bi as de,bj as Q,bk as ge,bl as he,bm as fe,b6 as pe,n as me,bn as ve,bo as be,bp as G,bq as $e,br as O,bs as _e,bt as xe,bu as Ce,bv as M,bw as V,w as B,$ as L,K as Y,o as Z,p as q,v as J,l as ke,bx as I,by as Se,bz as ye}from"./index-CJjWLc9u.js";import{D as we}from"./DocumentTitle-D2_K74cL.js";var Te=r("<input type=checkbox>"),De=r("<input>"),Ne=r("<select>"),Ie=r("<label>"),Pe=r("<option>A"),Ae=r("<option>AAAA"),Fe=r("<option>CNAME"),Ee=r("<option>TXT"),Re=r("<option>MX"),Me=r("<option>SRV"),Ve=r("<option>HTTPS"),Be=r("<option>NS"),Le=r("<option>DNSKEY"),Qe=r("<option>DS"),je=r("<option>SIG"),Ge=r("<option>SOA"),Oe=r("<option>RRSIG"),qe=r("<option>RP"),He=r('<div class="flex flex-col overflow-auto p-4">'),Ue=r('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><div class="flex items-center gap-2">'),Xe=r("<div class=py-2>"),ze=r('<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>'),Ke=r('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),We=r('<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">'),P=r("<option>"),Ye=r("<fieldset class=fieldset>"),Ze=r('<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">'),Je=r('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"></div><div class="flex flex-col"></div><div class="flex flex-col"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center">'),et=r('<div class="mx-auto flex max-w-screen-md flex-col gap-4">');const E=s=>{const[l,c]=M(s,["class"]);return(()=>{var a=Te();return V(a,B({get class(){return L("toggle",l.class)}},c),!1,!1),a})()},F=s=>{const[l,c]=M(s,["class"]);return(()=>{var a=De();return V(a,B({get class(){return L("input min-w-0",l.class)}},c),!1,!1),a})()},D=s=>{const[l,c]=M(s,["class"]);return(()=>{var a=Ne();return V(a,B({get class(){return L("select",l.class)}},c),!1,!0),t(a,()=>Y(()=>c.children)()),a})()},S=s=>{const[l,c]=M(s,["class"]);return(()=>{var a=Ie();return V(a,B({get class(){return L("label truncate",l.class)}},c),!1,!0),t(a,()=>Y(()=>c.children)()),a})()},tt=Z({name:q(),type:q()}),lt=()=>{const[s]=R(),l=te(),c="google.com",{form:a,isSubmitting:_}=K({extend:J({schema:tt}),onSubmit:i=>l.get("dns/query",{searchParams:{name:i.name||c,type:i.type}}).json().then(({Answer:v})=>g(v?.map(({data:n})=>n)||[])).catch(v=>ke.error(v.message))}),[u,g]=le([]);return(()=>{var i=Ue(),v=i.firstChild,n=v.firstChild;return W(a,v,()=>a),t(v,e(F,{type:"search",name:"name",class:"flex-1",placeholder:c,onInput:o=>{o.target.value||g([])}}),n),t(n,e(D,{name:"type",get children(){return[Pe(),Ae(),Fe(),Ee(),Re(),Me(),Ve(),Be(),Le(),Qe(),je(),Ge(),Oe(),qe()]}}),null),t(n,e(w,{type:"submit",class:"btn-primary",get loading(){return _()},get children(){return s("dnsQuery")}}),null),t(i,e(N,{get when(){return u().length>0},get children(){var o=He();return t(o,e(y,{get each(){return u()},children:p=>(()=>{var x=Xe();return t(x,p),x})()})),o}}),null),i})()},rt=Z({port:I(),"socks-port":I(),"redir-port":I(),"tproxy-port":I(),"mixed-port":I()}),nt=({isSingBox:s})=>{const[l]=R(),c=[{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:n=>void b("mixed-port",Number(n.target.value),i)},{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:n=>void b("port",Number(n.target.value),i)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:n=>void b("socks-port",Number(n.target.value),i)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:n=>void b("redir-port",Number(n.target.value),i)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:n=>void b("tproxy-port",Number(n.target.value),i)}],{form:a,setInitialValues:_,reset:u}=K({extend:J({schema:rt})}),[g,{refetch:i}]=X(Se);re(()=>{const n=g();n&&(_(n),u())});const v=z(()=>{const n=g();return n?.["mode-list"]||n?.modes||["rule","direct","global"]});return(()=>{var n=We(),o=n.firstChild,p=o.firstChild,x=p.nextSibling,m=x.nextSibling,h=o.nextSibling;return t(p,e(S,{for:"enable-allow-lan",get children(){return l("allowLan")}}),null),t(p,e(E,{id:"enable-allow-lan",get checked(){return g()?.["allow-lan"]},onChange:d=>void b("allow-lan",d.target.checked,i)}),null),t(x,e(S,{for:"mode",get children(){return l("runningMode")}}),null),t(x,e(D,{id:"mode",onChange:d=>void b("mode",d.target.value,i),get children(){return e(y,{get each(){return v()},children:d=>(()=>{var f=P();return f.value=d,t(f,()=>l(d)??d),T(()=>f.selected=d===g()?.mode),f})()})}}),null),t(m,e(S,{for:"interface-name",get children(){return l("outboundInterfaceName")}}),null),t(m,e(F,{id:"interface-name",get value(){return g()?.["interface-name"]},onChange:d=>void b("interface-name",d.target.value,i)}),null),t(n,e(N,{get when(){return!s()},get children(){return[(()=>{var d=ze(),f=d.firstChild,k=f.nextSibling,j=k.nextSibling;return t(f,e(S,{for:"enable-tun-device",get children(){return l("enableTunDevice")}}),null),t(f,e(E,{id:"enable-tun-device",get checked(){return g()?.tun?.enable},onChange:C=>void b("tun",{enable:C.target.checked},i)}),null),t(k,e(S,{for:"tun-ip-stack",get children(){return l("tunModeStack")}}),null),t(k,e(D,{id:"tun-ip-stack",onChange:C=>void b("tun",{stack:C.target.value},i),get children(){return e(y,{each:["Mixed","gVisor","System","LWIP"],children:C=>(()=>{var A=P();return A.value=C,t(A,C),T(()=>A.selected=g()?.tun?.stack===C),A})()})}}),null),t(j,e(S,{for:"device-name",get children(){return l("tunDeviceName")}}),null),t(j,e(F,{id:"device-name",get value(){return g()?.tun?.device},onChange:C=>void b("tun",{device:C.target.value},i)}),null),d})(),(()=>{var d=Ke();return W(a,d,()=>a),t(d,e(y,{each:c,children:f=>(()=>{var k=Ye();return t(k,e(S,{get for(){return f.key},get children(){return f.label()}}),null),t(k,e(F,{get id(){return f.key},get name(){return f.key},type:"number",get placeholder(){return f.label()},get onChange(){return f.onChange}}),null),k})()})),d})()]}}),h),t(h,e(w,{class:"btn-primary",get loading(){return ae()},onClick:ne,get children(){return l("reloadConfig")}}),null),t(h,e(w,{class:"btn-accent",get loading(){return ie()},onClick:se,get children(){return l("flushFakeIP")}}),null),t(h,e(w,{class:"btn-warning",get loading(){return ce()},onClick:oe,get children(){return l("restartCore")}}),null),t(h,e(N,{get when(){return!s()},get children(){return e(w,{class:"btn-secondary",get loading(){return de()},onClick:ue,get children(){return l("updateGEODatabases")}})}}),null),n})()},at=()=>{const[s]=R(),l=H(),c=[{label:()=>s("en"),value:Q.EN},{label:()=>s("zh"),value:Q.ZH},{label:()=>s("ru"),value:Q.RU}];return(()=>{var a=Je(),_=a.firstChild,u=_.firstChild,g=u.nextSibling,i=g.nextSibling,v=_.nextSibling,n=v.firstChild;return t(u,e($,{get children(){return s("useTwemoji")}}),null),t(u,e(E,{get checked(){return he()},onChange:o=>ge(o.target.checked)}),null),t(g,e($,{get children(){return s("switchLanguage")}}),null),t(g,e(D,{onChange:o=>fe(o.target.value),get children(){return e(y,{each:c,children:o=>(()=>{var p=P();return t(p,()=>o.label()),T(()=>p.selected=pe()===o.value),T(()=>p.value=o.value),p})()})}}),null),t(i,e($,{get children(){return U()?.url}}),null),t(i,e(w,{class:"btn-info",onClick:()=>{me(""),l(ve.Setup)},get children(){return s("switchEndpoint")}}),null),t(n,e($,{get children(){return s("autoSwitchTheme")}}),null),t(n,e(E,{get checked(){return G()},onChange:o=>be(o.target.checked)}),null),t(v,e(N,{get when(){return G()},get children(){var o=Ze(),p=o.firstChild,x=p.nextSibling;return t(p,e($,{get children(){return s("favDayTheme")}}),null),t(p,e(D,{onChange:m=>$e(m.target.value),get children(){return e(y,{each:O,children:m=>(()=>{var h=P();return h.value=m,t(h,m),T(()=>h.selected=_e()===m),h})()})}}),null),t(x,e($,{get children(){return s("favNightTheme")}}),null),t(x,e(D,{onChange:m=>xe(m.target.value),get children(){return e(y,{each:O,children:m=>(()=>{var h=P();return h.value=m,t(h,m),T(()=>h.selected=Ce()===m),h})()})}}),null),o}}),null),a})()},ot=()=>{const s=H();if(!U())return s("/setup",{replace:!0}),null;const[l]=R(),c="v1.189.1",[a]=X(ye,{initialValue:""}),_=z(()=>a()?.includes("sing-box")||!1);return[e(we,{get children(){return l("config")}}),(()=>{var u=et();return t(u,e(N,{get when(){return!_()},get children(){return[e($,{withDivider:!0,get children(){return l("dnsQuery")}}),e(lt,{})]}}),null),t(u,e($,{withDivider:!0,get children(){return l("coreConfig")}}),null),t(u,e(nt,{isSingBox:_}),null),t(u,e($,{withDivider:!0,get children(){return l("xdConfig")}}),null),t(u,e(at,{}),null),t(u,e($,{withDivider:!0,get children(){return l("version")}}),null),t(u,e(N,{get when(){return!a.loading},get children(){return e(ee,{frontendVersion:c,backendVersion:a})}}),null),u})()]};export{ot as default};
